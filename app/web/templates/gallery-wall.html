<!DOCTYPE html>
<html lang="{{ current_lang }}">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{{ _('gallery.meta.description') }}">
    <title>{{ _('gallery.meta.title') }}</title>

    <!-- Favicon -->
    <link rel="icon" href="/static/icons/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/static/icons/favicon.ico" type="image/x-icon">

    <!-- Preload critical resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="/static/css/navbar.css?v=5">
    <link rel="stylesheet" href="/static/css/gallery-wall.css">
</head>

<body class="has-navbar">
    <!-- Navbar -->
    <nav class="navbar">
        <div class="navbar-container">
            <a href="/" class="navbar-logo">
                <img src="/static/icons/gernibide-logo.png" alt="Gernibide" class="navbar-logo-icon">
                <span>Gernibide</span>
            </a>

            <ul class="navbar-menu" id="navbarMenu">
                <li class="navbar-menu-item">
                    <a href="/" class="navbar-menu-link">{{ _('common.nav.home') }}</a>
                </li>
                <li class="navbar-menu-item">
                    <a href="/statistics" class="navbar-menu-link">{{ _('common.nav.statistics') }}</a>
                </li>
                <li class="navbar-menu-item navbar-admin-only">
                    <a href="/dashboard/teacher" class="navbar-menu-link">{{ _('common.nav.classes') }}</a>
                </li>
                <li class="navbar-menu-item navbar-admin-only">
                    <a href="/dashboard" class="navbar-menu-link">{{ _('common.nav.dashboard') }}</a>
                </li>
                <li class="navbar-menu-item navbar-admin-only">
                    <a href="/gallery" class="navbar-menu-link active">{{ _('common.nav.gallery') }}</a>
                </li>
            </ul>

            <div class="navbar-auth">
                <span class="navbar-user-name hidden"></span>
                <div class="language-selector">
                    <select id="languageSelect" class="language-dropdown">
                        <option value="es" {% if current_lang == 'es' %}selected{% endif %}>ES</option>
                        <option value="eu" {% if current_lang == 'eu' %}selected{% endif %}>EU</option>
                    </select>
                </div>
                <a href="/login" class="navbar-contact">{{ _('common.nav.login') }}</a>
                <a href="#" class="navbar-logout hidden" id="logoutBtn">{{ _('common.nav.logout') }}</a>
            </div>

            <button class="navbar-toggle" id="navbarToggle" aria-label="Toggle menu">
                <svg class="navbar-toggle-icon" viewBox="0 0 24 24" fill="none">
                    <path d="M4 6H20M4 12H20M4 18H20" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" />
                </svg>
            </button>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Page Header -->
        <div class="page-header">
            <h1 class="page-title">{{ _('gallery.page.title') }} <span class="highlight">{{ _('gallery.page.highlight') }}</span></h1>
            <p class="page-description">{{ _('gallery.page.description') }}</p>
        </div>

        <!-- Class Filter -->
        <div class="filter-section">
            <label for="classFilter" class="filter-label">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                {{ _('gallery.filter.label') }}
            </label>
            <select id="classFilter" class="filter-select">
                <option value="">{{ _('gallery.filter.all_classes') }}</option>
                <!-- Classes loaded dynamically -->
            </select>
        </div>

        <!-- Tabs -->
        <div class="tabs-container">
            <button class="tab-btn active" data-tab="gallery">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke-width="2"/>
                    <circle cx="8.5" cy="8.5" r="1.5"/>
                    <polyline points="21 15 16 10 5 21" stroke-width="2"/>
                </svg>
                {{ _('gallery.tabs.gallery') }}
            </button>
            <button class="tab-btn" data-tab="messages">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                {{ _('gallery.tabs.messages') }}
            </button>
        </div>

        <!-- Gallery Section -->
        <div class="tab-content active" id="galleryContent">
            <div class="section-header">
                <h2 class="section-title">{{ _('gallery.gallery_section.title') }}</h2>
                <div class="gallery-count" id="galleryCount">0 {{ _('gallery.gallery_section.count_plural') }}</div>
            </div>
            <div class="gallery-grid" id="galleryGrid">
                <!-- Loading state -->
                <div class="loading-state">
                    <div class="spinner"></div>
                    <p>{{ _('gallery.gallery_section.loading') }}</p>
                </div>
            </div>
        </div>

        <!-- Message Wall Section -->
        <div class="tab-content" id="messagesContent">
            <div class="section-header">
                <h2 class="section-title">{{ _('gallery.messages_section.title') }}</h2>
                <div class="messages-count" id="messagesCount">0 {{ _('gallery.messages_section.count_plural') }}</div>
            </div>
            <div class="messages-wall" id="messagesWall">
                <!-- Loading state -->
                <div class="loading-state">
                    <div class="spinner"></div>
                    <p>{{ _('gallery.messages_section.loading') }}</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Image Modal -->
    <div class="modal" id="imageModal">
        <div class="modal-backdrop" id="modalBackdrop"></div>
        <div class="modal-content">
            <button class="modal-close" id="modalClose">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M18 6L6 18M6 6l12 12" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
            <img id="modalImage" alt="{{ _('gallery.modal.alt') }}">
            <div class="modal-info" id="modalInfo"></div>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        // Translations for JavaScript
        window.i18n = {
            gallery: {
                count_singular: "{{ _('gallery.gallery_section.count_singular') }}",
                count_plural: "{{ _('gallery.gallery_section.count_plural') }}",
                loading: "{{ _('gallery.gallery_section.loading') }}",
                empty_title: "{{ _('gallery.gallery_section.empty_title') }}",
                empty_description: "{{ _('gallery.gallery_section.empty_description') }}",
                error_title: "{{ _('gallery.gallery_section.error_title') }}",
                error_description: "{{ _('gallery.gallery_section.error_description') }}"
            },
            messages: {
                count_singular: "{{ _('gallery.messages_section.count_singular') }}",
                count_plural: "{{ _('gallery.messages_section.count_plural') }}",
                loading: "{{ _('gallery.messages_section.loading') }}",
                empty_title: "{{ _('gallery.messages_section.empty_title') }}",
                empty_description: "{{ _('gallery.messages_section.empty_description') }}",
                error_title: "{{ _('gallery.messages_section.error_title') }}",
                error_description: "{{ _('gallery.messages_section.error_description') }}"
            },
            filter: {
                all_classes: "{{ _('gallery.filter.all_classes') }}"
            }
        };
    </script>
    <script src="/static/js/navbar.js"></script>
    <script src="/static/js/gallery-wall.js"></script>
</body>

</html>
